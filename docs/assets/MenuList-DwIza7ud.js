import{j as f}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./index-DatCARk7.js";import{d as w}from"./styled-components.browser.esm-DD6bt04G.js";import{r as j}from"./index-RHVwCB2K.js";import{u as B}from"./usePopoverPosition-DScRzE65.js";const h=e=>e+"-menu-button",M=e=>e+"-menu-list",T=(e,t)=>`${e}-menu-item-${t}`,k=e=>document.getElementById(h(e)),V=e=>document.getElementById(M(e)),S=e=>{var t;return((t=e==null?void 0:e.querySelector("[role='menuitem']:first-of-type"))==null?void 0:t.id)??""},U=e=>{var t;return((t=e==null?void 0:e.querySelector("[role='menuitem']:last-of-type"))==null?void 0:t.id)??""},N=e=>{const t=v(e);if(!t.length)return"";const n=g(t);return t[(n+1)%t.length].id},O=e=>{const t=v(e);if(!t.length)return"";const n=g(t),o=n>0?n-1:t.length-1;return t[o].id},H=e=>{const t=v(e);if(!t.length)return;const n=g(t);t[n===-1?0:n].click()};function D(e,t){const n=v(e);if(!n.length||t.length>1)return"";const o=n.map(u=>{var l;return(l=u.textContent)==null?void 0:l.toLowerCase()[0]}),s=t.toLowerCase();let r;const c=g(n),d=(c+1)%n.length;r=o.indexOf(s,d),r===-1&&(r=o.indexOf(s,0)),r===-1&&(r=0);const i=r>-1?r:c;return n[i].id}const g=e=>e.findIndex(t=>t.getAttribute("data-selected")==="1"),v=e=>Array.from((e==null?void 0:e.querySelectorAll("[role='menuitem']"))??[]),q=a.createContext(null);function _({children:e}){const[t,n]=a.useState(!1),[o,s]=a.useState(""),r=a.useId(),c=a.useCallback((i=!0)=>{n(!0),setTimeout(()=>{const u=V(r);if(!u)return;u.focus();const l=i?N(u):O(u);s(l)},1)},[r]),d=a.useCallback(()=>{n(!1),s(""),k(r).focus()},[r]);return f.jsx(q,{value:{menuId:r,isOpen:t,open:c,close:d,activeDescendant:o,setActiveDescendant:s},children:e})}function m(){const e=a.useContext(q);if(!e)throw new Error("Menu context must be used inside a MenuProvider");return e}try{_.displayName="MenuProvider",_.__docgenInfo={description:"",displayName:"MenuProvider",props:{}}}catch{}const C=({children:e})=>f.jsx(_,{children:e});try{C.displayName="Menu",C.__docgenInfo={description:"",displayName:"Menu",props:{}}}catch{}const $="button";function A({ref:e,as:t,className:n,disableArrowKeys:o,...s}){const r=t||$,c=a.useRef(null);a.useImperativeHandle(e,()=>c.current);const{menuId:d,isOpen:i,close:u,open:l}=m(),y=()=>{z(s)||(i?u():l())},x=p=>{var b;p.key==="Escape"?(u(),(b=c.current)==null||b.focus()):p.key==="ArrowDown"&&!o?(p.preventDefault(),l()):p.key==="ArrowUp"&&!o&&(p.preventDefault(),l(!1))};return f.jsx(r,{...s,id:h(d),ref:c,type:"button",role:"button","aria-haspopup":"menu",className:n,"aria-controls":M(d),"aria-expanded":i,onClick:y,onKeyDown:x})}function z(e){return!!e["aria-disabled"]}try{A.displayName="MenuButton",A.__docgenInfo={description:"",displayName:"MenuButton",props:{disableArrowKeys:{defaultValue:null,description:"",name:"disableArrowKeys",required:!1,type:{name:"boolean"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}}}catch{}const F="div";function E({ref:e,as:t,onClick:n,onSelect:o,disabled:s,...r}){const c=t||F,{menuId:d,close:i,activeDescendant:u,setActiveDescendant:l}=m(),y=R(d),x=a.useRef(null),p=a.useCallback(()=>{(o==null?void 0:o())||i()},[i,o]),b=I=>{s||(n==null||n(I),p())},K=u===y;return f.jsx(G,{as:c,...r,id:y,ref:I=>{e==null||e(I),x.current=I},role:"menuitem",onClick:b,"data-selected":K?"1":"0","aria-disabled":s,onMouseOver:()=>l(y),tabIndex:-1})}function R(e){const t=a.useId();return T(e,t)}const G=w.div`
  display: block;
  text-decoration: none;
  color: var(--on-background);
  font-size: var(--font-size-regular);
  font-weight: 500;
  padding: var(--space-2) var(--space-3);
  transition:
    color 0.2s,
    background-color 0.2s;

  &[data-selected='1'] {
    background: var(--primary);
    color: var(--on-primary);
  }
`;try{E.displayName="MenuItem",E.__docgenInfo={description:"",displayName:"MenuItem",props:{onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"OnSelectFn"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}}}catch{}function P(e){const{isOpen:t}=m();return t?j.createPortal(f.jsx(J,{...e}),document.body):null}function J(e){const t=a.useRef(null),n=a.useRef(null),{menuId:o,activeDescendant:s,setActiveDescendant:r}=m(),c=a.useRef(k(o)),d=B(t,c);Q(t);const i=W(n);return f.jsx(X,{ref:t,style:d,children:f.jsx(Y,{...e,id:M(o),ref:n,"aria-labelledby":h(o),role:"menu",tabIndex:-1,onKeyDown:i,onMouseLeave:()=>r(""),"aria-activedescendant":s})})}function Q(e){const{menuId:t,close:n}=m();a.useEffect(()=>{const o=s=>{if(!e.current)return;const r=s.target;!e.current.contains(r)&&!k(t).contains(r)&&n()};return window.addEventListener("mousedown",o),()=>{window.removeEventListener("mousedown",o)}},[n,t,e])}function W(e){const{close:t,setActiveDescendant:n}=m();return a.useCallback(o=>{if(!e.current||o.ctrlKey||o.altKey||o.metaKey)return;const s=o.key;let r=!1;if(o.shiftKey)L(s)&&(n(D(e.current,s)),r=!0),o.key==="Tab"&&t();else switch(s){case" ":case"Enter":H(e.current),t(),r=!0;break;case"Esc":case"Escape":t(),r=!0;break;case"Up":case"ArrowUp":n(O(e.current)),r=!0;break;case"ArrowDown":case"Down":n(N(e.current)),r=!0;break;case"Home":case"PageUp":n(S(e.current)),r=!0;break;case"End":case"PageDown":n(U(e.current)),r=!0;break;case"Tab":t();break;default:L(s)&&(n(D(e.current,s)),r=!0);break}r&&(o.stopPropagation(),o.preventDefault())},[t,e,n])}function L(e){return e.length===1&&e.match(/\S/)}const X=w.div`
  position: absolute;
`,Y=w.div`
  padding-top: var(--space-2);
  padding-bottom: var(--space-2);
  background-color: var(--background);
  color: var(--on-background);
  box-shadow: var(--shadow-elevation-low);
  border: 1px solid rgba(0, 0, 0, 0.25);
  border-radius: var(--border-radius);
  max-height: 50vh;
  overflow-y: auto;
  white-space: nowrap;
`;try{P.displayName="MenuList",P.__docgenInfo={description:"",displayName:"MenuList",props:{}}}catch{}export{C as M,P as a,E as b,A as c};
